<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Home - Classroom</title>
    <link rel="icon" href="/Google_Classroom_Logo.png" />
    <link rel="stylesheet" href="/cloneclass/classroom.css" />
    <style>
        /* --- SYSTEM CSS (CRITICAL) --- */
        #game-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: black;
            z-index: 999999;
        }
        #game-frame { width: 100%; height: 100%; border: none; }
        .hidden { display: none !important; }
        
        #panic-corner {
            position: fixed;
            top: 0; left: 0;
            width: 15px; height: 15px;
            z-index: 1000000;
            cursor: pointer;
            background: transparent;
        }

        /* Logic for the secondary UI (XL-Learning) */
        #ui-wrapper { display: none; } 
    </style>
</head>
<body>

    <div id="panic-corner" onclick="exitToHome()"></div>

    <div id="classroom-ui">
        <header>
            <div class="header-content">
                <div class="header-left" style="display: flex; align-items: center; gap: 10px; padding: 10px;">
                    <div class="logo-container" style="display: flex; align-items: center; gap: 8px;">
                        <img src="/Google_Classroom_Logo.png" width="32" height="32" alt="Logo">
                        <span class="logo-text" style="font-size: 22px; color: #5f6368; font-family: 'Product Sans', Arial;">Classroom</span>
                    </div>
                </div>
                <div class="header-right" style="padding: 10px;">
                    <div class="profile-pic" style="width: 32px; height: 32px; background: #039be5; color: white; border-radius: 50%; text-align: center; line-height: 32px;">A</div>
                </div>
            </div>
        </header>

        <div class="main-layout" style="display: flex;">
            <aside class="sidebar" style="width: 240px; padding: 20px;">
                <nav>
                    <div style="color: #1967d2; background: #e8f0fe; padding: 10px; border-radius: 0 20px 20px 0; font-weight: bold;">Classes</div>
                    <div style="padding: 10px; color: #5f6368;">Calendar</div>
                </nav>
            </aside>

            <main class="main-content" style="flex-grow: 1; padding: 20px;">
                <div class="classes-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <div style="border: 1px solid #dadce0; border-radius: 8px; overflow: hidden;">
                        <div style="background: #1967d2; padding: 20px; color: white;">
                            <h2 style="margin: 0;">Math-7A Sequoia</h2>
                            <p style="margin: 0; font-size: 14px;">Period 1</p>
                        </div>
                        <div style="height: 100px; background: white;"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div id="game-overlay">
        <iframe id="game-frame" src=""></iframe>
    </div>

    <script>
        const classroomUI = document.getElementById('classroom-ui');
        const overlay = document.getElementById('game-overlay');
        const frame = document.getElementById('game-frame');

        let lastKey = "";
        let lastTime = 0;

        // Force focus for key listening
        window.focus();

        window.addEventListener('keydown', function(e) {
            const currentTime = new Date().getTime();
            const key = e.key.toLowerCase();

            // Sequence: / followed by a key
            if (lastKey === "/") {
                const keyMap = {
                    'u': 'Cornelius Commands/UniUB.html',
                    'p': 'Cornelius Commands/Petezah.html',
                    'f': 'Cornelius Commands/Frogies.html',
                    'g': 'Cornelius Commands/game-page.html',
                    'r': 'Cornelius Commands/Reds.html',
                    '5': 'Cornelius Commands/US5.html',
                    '.': 'Cornelius Commands/guide.html',
                    'i': 'Cornelius Commands/about-blank.html',
                    'e': 'Cornelius Commands/endis.html'
                };

                if (keyMap[key]) {
                    e.preventDefault();
                    launch(keyMap[key]);
                } else if (key === 'h') {
                    e.preventDefault();
                    exitToHome();
                }
            }

            lastKey = e.key;
            lastTime = currentTime;

            // Reset sequence after 1 second
            setTimeout(() => {
                if (new Date().getTime() - lastTime >= 1000) {
                    lastKey = "";
                }
            }, 1000);
        }, true);

        function launch(file) {
            if(!file) return;

            // Hide UI and show frame
            classroomUI.classList.add('hidden');
            overlay.style.display = 'block';
            frame.src = file;
            
            // Set a stealthy tab title
            document.title = "Assignment - Google Classroom";
            
            // Keep window focused so /h exit works
            setTimeout(() => { window.focus(); }, 150);
        }

        function exitToHome() {
            overlay.style.display = 'none';
            classroomUI.classList.remove('hidden');
            frame.src = ""; 
            document.title = "Home - Classroom";
            window.focus();
        }
    </script>
</body>
</html>
